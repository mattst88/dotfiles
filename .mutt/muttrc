# vim: ft=muttrc

set realname="Matt Turner"
set from="mattst88@gmail.com"

macro generic "<esc>1" ":set from=mattst88@gmail.com"
macro generic "<esc>2" ":set from=mattst88@gentoo.org"

alternative_order text/enriched text/html text/plain
auto_view text/x-vcard text/html text/enriched

set mbox_type = Maildir
set folder    = "~/.mail"
set mbox      = "+intel/Inbox"
set record    = "+intel/Sent Items"
set postponed = "+intel/Drafts"
set spoolfile = "+intel/Inbox"
set trash     = "+intel/Deleted Items"

mailboxes = \
+intel/Inbox \
+intel/Sent\ Items \
+intel/Drafts \
+intel/Deleted\ Items

set header_cache=~/.mutt/hcache
set mail_check_stats

# sidebar
#set sidebar_width=15
set sidebar_short_path = yes
set sidebar_format="%B%* %N"
set sidebar_visible = yes
bind index,pager B sidebar-toggle-visible
bind index,pager \ck sidebar-prev
bind index,pager \cj sidebar-next
bind index,pager \Co sidebar-open

set alias_file= ~/.mutt/aliases
source $alias_file

set sendmail="/usr/bin/msmtp"

### PGP
set crypt_use_gpgme=yes

# Automatically sign all outgoing messages
set crypt_autosign=yes

# Automatically verify the sig of a message when opened
set crypt_verify_sig=yes

# Automatically sign replies to messages which are signed
# Automatically encrypt replies to messages which are encrypted
# Automatically sign replies to messages which are encrypted
set crypt_replysign=yes
set crypt_replyencrypt=yes
set crypt_replysignencrypted=yes

folder-hook . `rm -f /tmp/mutt/*`

# Basic Options --------------------------------------
set wait_key = no        # shut up, mutt
set mbox_type = Maildir  # mailbox type
set timeout = 3          # idle time before scanning
set mail_check = 0       # minimum time between scans
unset move               # gmail does that
set delete               # don't ask, just do
unset confirmappend      # don't ask, just do!
set quit                 # don't ask, just do!!
unset mark_old           # read/new is good enough for me
set beep_new             # bell on new mails
set pipe_decode          # strip headers and eval mimes when piping
set thorough_search      # strip headers and eval mimes before searching
set recall = no          # don't ask if I want to recall a postponed message

# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"

# Index View Options ---------------------------------
set date_format = "%m/%d"
set sort = threads                         # like gmail
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

# Format for index list
set index_format = "%4C %Z %[%d/%b]  %-16.15F %?M?(%3M)&     ? %s %>"

macro index F "<shell-escape>mbsync -a<enter>" "run mbsync to sync all mail"

# Index Key Bindings ---------------------------------
bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
bind index <tab>    sync-mailbox
bind index P recall-message

# Pager View Options ---------------------------------
set pager_index_lines = 10 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs
auto_view text/html
set strict_threads         # Don't thread by message subjec
alternative_order text/html text/enriched text/plain 

set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
alternative_order text/plain text/enriched text/html

# Header Options -------------------------------------
ignore *                                # ignore all headers
unignore from: to: cc: date: subject:   # show only these
unhdr_order *                           # some distros order things by default
hdr_order from: to: cc: date: subject:  # and in this order

# Pager Key Bindings ---------------------------------
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom
bind pager R  group-reply

# View attachments properly.
bind attach <return> view-mailcap

# Compose View Options -------------------------------
set envelope_from                    # which from?
set sig_dashes                       # dashes before sig
set edit_headers                     # show headers when composing
set fast_reply                       # skip to compose when replying
unset reply_self                     # don't include myself when replying
unset askcc                          # don't ask for CC:
set fcc_attach                       # save attachments with the body
unset mime_forward                   # forward attachments as part of body
set forward_format = "Fwd: %s"       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies
set forward_quote                    # include message in forwards
set editor = "vim"                   # Use terminal Vim to compose email.
set text_flowed = yes                # Flow text instead of using line breaks
set sig_on_top                       # puts signature above quoted text
# set display_filter = ~/.mutt/display_filter.sh
set copy = yes

set mailcap_path = ~/.mutt/mailcap

source ~/.mutt/colors.muttrc
#source /etc/mutt/notmuch-mutt.rc
